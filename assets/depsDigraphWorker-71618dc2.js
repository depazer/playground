(function(){"use strict";const s={dependencyNodes:[],loopLinks:[],id:-1};self.onmessage=e=>{s.id=Math.random(),s.dependencyNodes=e.data.dependency.dependencyNodes,s.loopLinks=y(e.data.dependency.loopDependencies),k(s.id,e.data.rootDependency)};function k(e,d){const n=s.dependencyNodes,i=d===""?void 0:n.find(({name:o})=>o===d),f=[],l=[],r=new Set;i&&u(i);function u(o){r.add(o.name),f.push(o),l.push(...o.dependencies.map(c=>p(o.name,c))),o.dependencies.forEach(c=>{!r.has(c)&&u(n.find(a=>a.name===c))})}const L={nodes:i===void 0?n:f,links:i===void 0?n.reduce((o,{name:c,dependencies:a})=>(o.push(...a.map(m=>p(c,m))),o),[]):l};if(s.id===e)self.postMessage({type:0,data:L});else return}function p(e,d){const n=s.dependencyNodes.find(t=>t.name===d);return{source:e,target:d,linkColor:h((n==null?void 0:n.isDevDependency)??!1,s.loopLinks.includes(`${e}->${d}`))}}function y(e){const d=new Set;for(const n of e)for(const[t,i]of n.slice(1).entries())d.add(`${n[t]}->${i}`);return[...d]}function h(e,d){return{"00":"#c792ce","01":"#ff536d",11:"#ff536d",10:"#82aae0"}[`${+e}${+d}`]}})();
